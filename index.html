<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Intelligence - Global Pilot Terminal</title>
    <script src="https://cdn.jsdelivr.net/npm/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    
    <style>
        /* üé® NEXUS PREMIUM BEYAZ TEMA */
        :root {
            --primary: #0070f3;
            --primary-dark: #0051af;
            --accent: #00d4ff;
            --bg: #ffffff;
            --card-bg: #fdfdfd;
            --text-main: #1a1a1a;
            --text-muted: #666666;
            --border: #eaeaea;
            --success: #00c853;
            --terminal-bg: #121212;
        }

        * { box-sizing: border-box; transition: all 0.2s ease; }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Inter', -apple-system, system-ui, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* CONTAINER */
        .app-container {
            width: 100%;
            max-width: 480px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* HEADER & WALLET */
        .header-panel {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
        }

        #ton-connect-button {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .pilot-status {
            display: inline-block;
            background: #eef2f6;
            color: var(--primary);
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .balance-display {
            font-size: 42px;
            font-weight: 800;
            margin: 10px 0;
            color: var(--text-main);
        }

        .balance-display span {
            font-size: 16px;
            color: var(--text-muted);
            font-weight: 400;
        }

        /* üß† VERA ENGINE: AI TRAINING TERMINAL */
        .terminal-box {
            background: var(--terminal-bg);
            border-radius: 16px;
            padding: 15px;
            border: 2px solid #333;
            position: relative;
            overflow: hidden;
        }

        .terminal-header {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #333;
            padding-bottom: 8px;
            margin-bottom: 10px;
            font-size: 10px;
            color: #888;
            font-family: monospace;
        }

        #logs {
            height: 100px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #00ff00;
            line-height: 1.5;
        }

        .mining-progress-bar {
            width: 100%;
            height: 4px;
            background: #222;
            margin-top: 10px;
            border-radius: 2px;
        }

        .mining-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            box-shadow: 0 0 10px var(--accent);
        }

        /* üìã CARDS & STATS */
        .nexus-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 20px;
        }

        .card-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* PROGRESS BARS (NFT) */
        .progress-group { margin-bottom: 15px; }
        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            margin-bottom: 6px;
            color: var(--text-muted);
        }
        .bar-bg {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
        }
        .bar-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
        }

        /* BUTTONS */
        .main-button {
            width: 100%;
            padding: 18px;
            border-radius: 16px;
            border: none;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:active { transform: scale(0.98); }

        .btn-outline {
            background: white;
            border: 1.5px solid var(--border);
            color: var(--text-main);
            margin-top: 10px;
        }

        /* LEADERBOARD */
        .leader-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }
        .leader-row:last-child { border: none; }

        /* DEBUG PANEL */
        .debug-tool {
            margin-top: 30px;
            padding: 15px;
            border: 1px dashed #ccc;
            border-radius: 10px;
            font-size: 10px;
            color: #999;
            text-align: center;
        }

        /* MODAL (QUIZ) */
        #quiz-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
    </style>
</head>
<body>

<div class="app-container">
    
    <div id="ton-connect-button"></div>

    <div class="header-panel">
        <div class="pilot-badge" id="pilot-id">OFFLINE</div>
        <div class="balance-display" id="balance">0.00 <span>$NI</span></div>
        <p style="font-size: 12px; color: #888;">Global Nexus Intelligence Balance</p>
    </div>

    <div class="terminal-box">
        <div class="terminal-header">
            <span>CORE: VERA-ENGINE v2.0</span>
            <span id="hash-rate">0.00 h/s</span>
        </div>
        <div id="logs">
            > Initializing system...<br>
            > Waiting for Pilot connection...
        </div>
        <div class="mining-progress-bar">
            <div class="mining-fill" id="mining-fill"></div>
        </div>
    </div>

    <button class="main-button btn-primary" onclick="openQuiz()">
        ‚ö° START AI DIAGNOSTIC QUIZ
    </button>

    <div class="nexus-card">
        <div class="card-title">üöÄ VERA CORE UPGRADE</div>
        <p style="font-size: 11px; color: #666; margin-bottom: 15px;">
            Upgrade your engine. 100 $NI will be sent to Admin Wallet for validation.
        </p>
        <button class="main-button btn-outline" onclick="adminTransferTest()">
            UPGRADE FOR 100 $NI
        </button>
    </div>

    <div class="nexus-card">
        <div class="card-title">üèÜ Pƒ∞LOT ACHIEVEMENTS</div>
        
        <div class="progress-group">
            <div class="progress-label">
                <span>NFT G√ñREVƒ∞: 5000 TEST</span>
                <span id="test-text">0 / 5000</span>
            </div>
            <div class="bar-bg"><div class="bar-fill" id="test-bar"></div></div>
        </div>

        <div class="progress-group">
            <div class="progress-label">
                <span>LOYALTY: 365 DAYS MINING</span>
                <span id="days-text">0 DAYS</span>
            </div>
            <div class="bar-bg"><div class="bar-fill" id="days-bar" style="background: #00c853;"></div></div>
        </div>
    </div>

    <div class="nexus-card">
        <div class="card-title">üåê TOP 100 GLOBAL PILOTS</div>
        <div id="leaderboard">
            </div>
    </div>

    <div class="debug-tool">
        DEVELOPER TOOLS: 
        <button onclick="getTestTokens()" style="font-size: 9px;">ADD 250 TEST $NI</button>
    </div>
</div>

<div id="quiz-modal">
    <div class="nexus-card" style="width: 100%; text-align: center;">
        <h3>AI DIAGNOSTIC TEST</h3>
        <p id="quiz-q">Loading...</p>
        <button class="main-button btn-primary" onclick="handleQuiz(true)">YES / TRUE</button>
        <button class="main-button btn-outline" onclick="handleQuiz(false)">NO / FALSE</button>
    </div>
</div>

<script>
    // --- CONFIGURATION ---
    const ADMIN_WALLET = "UQA-YOUR-ADMIN-WALLET-HERE"; // Kendi c√ºzdanƒ±nƒ± buraya yaz ortak!
    const tonConnectUI = new TONConnectUI.TonConnectUI({
        manifestUrl: 'https://nexusintelligencelabs.github.io/nexusintelligence.github.io/tonconnect-manifest.json',
        buttonRootId: 'ton-connect-button'
    });

    let currentWallet = null;
    let userData = {
        balance: 0,
        tests: 0,
        startTime: null,
        pilotID: ""
    };
    let quizPool = 0;

    // --- C√úZDAN Sƒ∞STEMƒ∞ (SENƒ∞N ƒ∞STEDƒ∞ƒûƒ∞N Gƒ∞Bƒ∞ C√úZDANA √ñZEL) ---
    tonConnectUI.onStatusChange(wallet => {
        if (wallet) {
            currentWallet = wallet.account.address;
            initializePilot();
        } else {
            currentWallet = null;
            resetSystem();
        }
    });

    function initializePilot() {
        const saved = localStorage.getItem('nexus_pilot_' + currentWallet);
        if (saved) {
            userData = JSON.parse(saved);
        } else {
            userData = {
                balance: 0,
                tests: 0,
                startTime: Date.now(),
                pilotID: "PILOT-" + Math.floor(1000 + Math.random() * 8999) + "-NX"
            };
            saveToStorage();
        }
        updateUI();
        startVeraEngine();
        loadLeaderboard();
    }

    function saveToStorage() {
        if (currentWallet) {
            localStorage.setItem('nexus_pilot_' + currentWallet, JSON.stringify(userData));
        }
    }

    function resetSystem() {
        location.reload(); // En g√ºvenli temizlik
    }

    // --- UI G√úNCELLEME (HER ≈ûEY DAHƒ∞L) ---
    function updateUI() {
        document.getElementById('balance').innerHTML = `${userData.balance.toFixed(2)} <span>$NI</span>`;
        document.getElementById('pilot-id').innerText = userData.pilotID;
        
        // Test Progress
        document.getElementById('test-text').innerText = `${userData.tests} / 5000`;
        document.getElementById('test-bar').style.width = Math.min((userData.tests / 5000 * 100), 100) + "%";

        // Loyalty Progress
        const daysActive = Math.floor((Date.now() - userData.startTime) / (1000 * 60 * 60 * 24));
        document.getElementById('days-text').innerText = `${daysActive} DAYS`;
        document.getElementById('days-bar').style.width = Math.min((daysActive / 365 * 100), 100) + "%";
    }

    // --- MINING: VERA ENGINE LOGS ---
    function startVeraEngine() {
        const logContainer = document.getElementById('logs');
        const phrases = [
            "> Decoding neural patterns...",
            "> Training dataset alpha-4...",
            "> Synaptic link established.",
            "> Vera Core: Optimization complete.",
            "> Mining success: +0.05 $NI allocated."
        ];

        setInterval(() => {
            if (!currentWallet) return;
            
            // Log animasyonu
            const p = phrases[Math.floor(Math.random() * phrases.length)];
            logContainer.innerHTML += `<br>${p}`;
            logContainer.scrollTop = logContainer.scrollHeight;

            // Progress bar animasyonu
            let fill = document.getElementById('mining-fill');
            fill.style.transition = 'none';
            fill.style.width = '0%';
            
            setTimeout(() => {
                fill.style.transition = 'width 4s linear';
                fill.style.width = '100%';
            }, 50);

            // Bakiye ekle
            userData.balance += 0.05;
            updateUI();
            saveToStorage();
        }, 5000);
    }

    // --- QUIZ Sƒ∞STEMƒ∞ (TOPLU √ñD√úL) ---
    function openQuiz() {
        if (!currentWallet) return alert("Please connect wallet first!");
        document.getElementById('quiz-modal').style.display = 'flex';
        document.getElementById('quiz-q').innerText = "Is this image processed by Vera Engine?";
    }

    function handleQuiz(answer) {
        // Sim√ºlasyon: Her cevap 20 puan havuza
        quizPool += 20;
        userData.tests += 1;
        
        if (confirm("Next question? (Cancel to finish and claim)")) {
            // Devam
        } else {
            userData.balance += quizPool;
            alert(`${quizPool} $NI has been added to your balance!`);
            quizPool = 0;
            document.getElementById('quiz-modal').style.display = 'none';
            updateUI();
            saveToStorage();
        }
    }

    // --- ADMIN TRANSFER TESTƒ∞ ---
    function adminTransferTest() {
        if (userData.balance < 100) return alert("Insufficient $NI! Get test tokens below.");
        
        const confirmTx = confirm(`Transfer 100 $NI to Admin (${ADMIN_WALLET.substring(0,8)}...)?`);
        
        if (confirmTx) {
            userData.balance -= 100;
            updateUI();
            saveToStorage();
            
            const logContainer = document.getElementById('logs');
            logContainer.innerHTML += `<br><span style="color:yellow">> [TX] 100 $NI SENT TO ADMIN WALLET.</span>`;
            alert("Upgrade successful! Check the terminal logs.");
        }
    }

    // --- LEADERBOARD (TOP 100 Sƒ∞M√úLASYONU) ---
    function loadLeaderboard() {
        const container = document.getElementById('leaderboard');
        const pilots = [
            {id: "PILOT-8821-NX", bal: 4500.50},
            {id: "PILOT-1029-NX", bal: 3200.00},
            {id: userData.pilotID, bal: userData.balance},
            {id: "PILOT-7726-NX", bal: 150.25}
        ].sort((a,b) => b.bal - a.bal);

        container.innerHTML = pilots.map((p, i) => `
            <div class="leader-row">
                <span>#${i+1} ${p.id}</span>
                <strong>${p.bal.toFixed(2)} $NI</strong>
            </div>
        `).join('');
    }

    // --- DEVELOPER TOOLS ---
    function getTestTokens() {
        userData.balance += 250;
        updateUI();
        saveToStorage();
        alert("250 Test $NI added to your pilot account!");
    }
</script>

</body>
</html>
